/*! JSON Lander v0.2-alpha | (c) Mi-Home.pl */
var lang=document.documentElement.lang.replace("-","_"),langShort=lang.substring(0,2),contentUrl=settings.contentUrl,pageUrl=settings.pageUrl,pageId=pageUrl.replace("-","_"),utmTags=settings.utmTags,redirect=settings.redirect,pageMenu=settings.menu;const appUrl="/json-lander/",appLocaleUrl=appUrl+"locale/"+lang+"/app.js",itemsGlobalUrl=appUrl+"data/items.json",itemsLocalUrl=appUrl+"locale/"+lang+"/items.json";var develop=settings.develop;develop&&1==develop&&(console.log("\nYou are now in Develop Mode. Have fun! ;)\n\nCurrent page language: "+langShort+" ("+lang+")\n\n"),console.log("Loading files:"),console.log(contentUrl),console.log(appLocaleUrl),console.log(itemsGlobalUrl),console.log(itemsLocalUrl),console.log("\n")),$(document).ready(function(){document.body.id=pageId,$.getScript(appLocaleUrl,function(){if($("#content").append('<div id="page_loader"></div>'),$("footer").html(`Copyright 2021 &copy; ${copyrights}`),$("#header--links").append(`\n      <a href="/" rel="nofollow" class="header--logo">&nbsp;</a>\n      <a href="/" rel="nofollow" class="header--back_to_store">\n        ${back_to_store} <i class="fad fa-store"></i>\n      </a>\n    `),$(".header--logo").addClass("logo__"+settings.logo),settings.header.content){var e=settings.header.contentAlign;$("#header--content").addClass("__"+e).append(' <div class="header--wrapper"></div> '),$.each(settings.header.content,function(){this.headerTitle&&$(".header--wrapper").append(` <h1 class="txt__heavy">${this.headerTitle}</h1> `),this.headerSubtitle&&$(".header--wrapper").append(` <h2 class="txt__bold">${this.headerSubtitle}</h2> `),this.headerText&&$(".header--wrapper").append(` <p class="txt__regular">${this.headerText}</p> `)})}$("#side_btns").html(` <a href="#${pageId}" target="_blank" rel="nofollow" class="btn--top">Top</a> `),null!==instagramUrl&&""!==instagramUrl&&$("#side_btns").prepend(` <a href="${instagramUrl}" target="_blank" rel="nofollow" class="btn--ig">Instagram</a> `),null!==facebookUrl&&""!==facebookUrl&&$("#side_btns").prepend(` <a href="${facebookUrl}" target="_blank" rel="nofollow" class="btn--fb">Facebook</a> `),contentUrl&&$.getJSON(itemsGlobalUrl,function(e,t,a){develop&&1==develop&&console.log("Global Database Request Success"),$.getJSON(itemsLocalUrl,function(t,a,l){function n(e,t){return[...[e,t].reduce((e,t)=>(t.forEach(t=>e.has(t.id)&&Object.assign(e.get(t.id),t)||e.set(t.id,t)),e),new Map).values()]}develop&&1==develop&&(console.log("Local Database Request Success"),console.log("Merging items..."));const o=n(e,t);$.getJSON(contentUrl,function(e,t,a){develop&&1==develop&&(console.log("Content Request Success. Got this data:"),console.log(e),console.log("Rendering Content...")),$("#page_loader").remove(),1==pageMenu&&$("header").after('<nav><div class="nav--wrapper"><ul class="nav--items"></ul></div></nav>'),function(t){const a=document.getElementById("content");let l=0;$.each(e,function(e){const t=this,s=t.items;t.menu&&l++;var i=document.createElement("section");if(a.appendChild(i),e+=1,i.id="section_"+e,sectionElId="#section_"+e,t.title){var r=document.createElement("h3");r.innerHTML=t.title,i.appendChild(r)}if(t.text){var c=document.createElement("p");c.innerHTML=t.text,i.appendChild(c)}if(s){n(s,o);var d=document.createElement("div");i.appendChild(d),d.classList.add("content__items"),"featured"==t.type?d.classList.add("__featured"):"small"==t.type&&d.classList.add("__small"),$.each(s,function(){const e=this;var t=document.createElement("div");t.classList.add("section--item"),d.appendChild(t),$(".section--item").html(`\n                    <div class="item--head">\n                      <a href="" target="_blank">\n                        <img src="" />\n                      </a>\n                      <div class="item--benefits">\n                        <div class="item--discount"></div>\n                      </div>\n                    </div>\n                    <div class="item--info">\n                      <h3 class="item--name"></h3>\n                      <div class="item--desc"></div>\n                      <div class="item--footer">\n                        <div class="item--price"></div>\n                        <a href="" class="item--btn" target="_blank">\n                          ${check_it_out}\n                        </a>\n                      </div>\n                    </div>\n                  `);var a=e.id;t.id=a;var l=".section--item#"+a;"custom"!=e.type?setTimeout(()=>{var t=$(l+" .item--head a"),a=$(l+" .item--footer a");if(!1===e.utmTags)t.attr("href",e.customUrl),a.attr("href",e.customUrl);else{var n=e.url+utmTags;void 0===e.customUrl?(t.attr("href",n),a.attr("href",n)):(n=e.customUrl+utmTags,t.attr("href",n),a.attr("href",n))}$(l+" .item--head img").attr("src",e.img);var o=e.name;if(o=(o=o.replaceAll("(",'<span class="name--label">')).replaceAll(")","</span>"),void 0===e.customName?$(l+" .item--name").html(`\n                          <span class="item--category">${e.category}</span><br />${o}\n                        `):e.customName&&(o=e.customName,$(l+" .item--name").html(`\n                          <span class="item--category">${e.category}</span><br />${o}\n                        `)),e.nameLabel){var s=e.nameLabel;s=(s=s.replaceAll("(",'<span class="name--label">')).replaceAll(")","</span>"),$(l+" .item--name").append(`\n                          ${s}\n                        `)}if($(l+" .item--desc").html(`<p>${e.desc}</p>`),e.text&&$(l+" .item--desc").append(`<p class="item--text">${e.text}</p>`),e.labelName&&!e.labelIcon?$(l+" .item--head").prepend(`\n                          <div class="item--label">${e.labelName}</div>\n                        `):e.labelName&&e.labelIcon&&$(l+" .item--head").prepend(`\n                          <div class="item--label"><i class="fas fa-${e.labelIcon}"></i> ${e.labelName}</div>\n                        `),e.price){var i=e.price.regular-e.price.promo,r=Math.round((e.price.regular-e.price.promo)/e.price.regular*100);e.price.regular&&e.price.promo?(e.discount=e.price.regular-e.price.promo,$(l+" .item--price").html(`\n                            ${e.price.promo}<small> ${currency}</small>\n                            <span class="__crossed">${e.price.regular} ${currency}</span>\n                          `),e.price.from&&($(l+" .item--price").prepend(`<small>${price_from}</small>`),$(l+" .item--price .__crossed").prepend(`${price_from} `)),0==e.price.percent?($(l+" .item--discount").append(`\n                              <span class="benefit--title">${discount_title}</span>\n                              <strong>${i}<small> ${currency}</small></strong>\n                            `),e.price.discount&&$(l+" .item--discount strong").html(`<small>${up_to} </small>${e.price.discount}<small> ${currency}</small>`)):($(l+" .item--discount").append(`\n                              <span class="benefit--title">${discount_title}</span>\n                              <strong>${r}<small>%</small></strong>\n                            `),e.price.discount&&$(l+" .item--discount strong").html(`<small>${up_to} </small>${e.price.discount}<small>%</small>`))):e.price.promo||($(l+" .item--price").html(`${e.price.regular}<small> ${currency}</small>`),e.price.from&&$(l+" .item--price").prepend(`<small>${price_from} </small>`))}e.gift&&($(l+" .item--benefits").addClass("benefit--gift"),$(l+" .item--benefits").append(`\n                          <div class="item--gift">\n                            <a href="${e.gift.url}" target="_blank" title="${e.gift.name}">\n                              <img src="${e.gift.img}" />\n                            </a>\n                            <span class="benefit--title">${gift_included}</span>\n                          </div>\n                        `))},0):"custom"==e.type&&($(l).addClass("item__custom"),setTimeout(()=>{$(".item__custom"+l).html(`${e.content}`)},0)),!0===e.soldOut&&setTimeout(()=>{$(l).addClass("item__sold_out"),$(l+" .item--footer a").html(sold_out)},0),!0===e.soon&&setTimeout(()=>{$(l).addClass("item__soon"),$(l+" .item--footer a").html(soon)},0)})}if(1==pageMenu&&t.menu&&$("nav .nav--items").append(`<li class="nav--item"><a href="${sectionElId}" rel="nofollow">${t.menu}</a></li>`),"img"==t.type){var m=document.createElement("div");i.appendChild(m),m.classList.add("content__img");var p=sectionElId+" .content__img",u='<img src="'+t.img.desktop+'" class="img__desktop">',g='<img src="'+t.img.mobile+'"  class="img__mobile">';t.url?($(p).html(` <a href="${t.url}" target="_blank" title="${find_out}"></a> `),$(p+" a").html(u+g),void 0===t.img.mobile&&$(p+" a").html(g)):($(p).html(u+g),void 0===t.img.mobile&&$(p).html(g))}if("custom"==t.type){var f=document.createElement("div");i.appendChild(f),f.classList.add("content__custom"),$(sectionElId+" .content__custom").html(t.content)}if("embed"===t.type){var h=document.createElement("div");i.appendChild(h),h.classList.add("content__embed_iframe"),t.embed.youtube&&$(sectionElId+" .content__embed_iframe").html(`\n                    <iframe\n                      src="https://www.youtube.com/embed/${t.embed.youtube}"\n                      frameborder="1" autoplay="1" rel="0" controls="0"\n                      allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"\n                      allowfullscreen="">\n                    </iframe>\n                  `)}"disclaimer"===t.type&&$(sectionElId).prop("id","page_disclaimer")}),1==pageMenu&&$("nav .nav--items").addClass("col__"+l)}()}).fail(function(e,t,a){develop&&1==develop&&(console.log("Content Request Failed: "+t+", "+a),$("#page_loader").remove(),$("#content").append(" &#10060; Error found while parsing Content. Check console for more information. "))}).always(function(e,t){develop&&1==develop&&console.log("Content Rendering Complete")})}).fail(function(e,t,a){develop&&1==develop&&console.log("Local Database Request Failed: "+t+", "+a)}).always(function(e,t){develop&&1==develop&&console.log("Local Database Request Complete")})}).fail(function(e,t,a){develop&&1==develop&&console.log("Global Database Request Failed: "+t+", "+a)}).always(function(e,t){develop&&1==develop&&console.log("Global Database Request Complete")})})}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault();var t=$(this).attr("href");"#"!==t&&$("html, body").animate({scrollTop:$(t).offset().top},1e3)});
