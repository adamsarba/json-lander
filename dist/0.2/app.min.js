/*! JSON Lander v0.2-alpha | (c) Mi-Home.pl */
var lang=document.documentElement.lang.replace("-","_"),langShort=lang.substring(0,2),contentUrl=settings.contentUrl,pageUrl=settings.pageUrl,utmTags=settings.utmTags,redirect=settings.redirect,pageMenu=settings.menu;const appUrl="/event/libs/json-lander/",distUrl="/event/libs/json-lander/0.2/",appLocaleUrl=appUrl+"locale/"+lang+"/app.js",itemsGlobalUrl=appUrl+"data/items.json?210706",itemsLocalUrl=appUrl+"locale/"+lang+"/items.json?210706";var develop=settings.develop;develop&&1==develop&&(console.warn("\nYou are now in Develop Mode. Have fun! ;)\n\nCurrent page language: "+langShort+" ("+lang+")\n\n"),console.groupCollapsed("Loading files..."),console.log(contentUrl+"\n"+appLocaleUrl+"\n"+itemsGlobalUrl+"\n"+itemsLocalUrl),console.groupEnd(),console.groupCollapsed("Loading window locations..."),console.log("Current URL:  "+window.location.href+"\nProtol:       "+window.location.protocol+"\nHost domain:  "+window.location.hostname+"\nCurrent path: "+window.location.pathname+"\n"),console.groupEnd()),$(document).ready(function(){document.body.id=pageUrl,$.getScript(appLocaleUrl,function(){if($("#content").append('<div id="page_loader"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>'),$("footer").html(`Copyright 2021 &copy; ${COPYRIGHTS}`),$("#header--links").append(`\n      <a href="/" rel="nofollow" class="header--logo" title="${BACK_TO_STORE}">&nbsp;</a>\n      <a href="/" rel="nofollow" class="header--back_to_store">\n        ${BACK_TO_STORE} <i class="fad fa-store"></i>\n      </a>\n    `),$(".header--logo").addClass("logo__"+settings.logo),settings.header){var e=settings.header.contentAlign;$("#header--content").addClass("__"+e).append('<div class="content--wrapper"></div>'),$.each(settings.header.content,function(){this.headerTitle&&$(".content--wrapper").append(`<h1 class="header--title">${this.headerTitle}</h1>`),this.headerSubtitle&&$(".content--wrapper").append(`<h2 class="header--sub_title">${this.headerSubtitle}</h2>`),this.headerText&&$(".content--wrapper").append(`<p class="header--text">${this.headerText}</p>`)})}$("#side_btns").html(`<a href="#${pageUrl}" target="_blank" rel="nofollow" class="btn--top">&nbsp;</a>`),null!==instagramUrl&&""!==instagramUrl&&$("#side_btns").prepend(`<a href="${instagramUrl}" target="_blank" rel="nofollow" class="btn--ig">&nbsp;</a>`),null!==facebookUrl&&""!==facebookUrl&&$("#side_btns").prepend(`<a href="${facebookUrl}" target="_blank" rel="nofollow" class="btn--fb">&nbsp;</a>`),contentUrl&&$.getJSON(itemsGlobalUrl,function(e,t,a){develop&&1==develop&&console.log("Global Database Request Success"),$.getJSON(itemsLocalUrl,function(t,a,n){function l(e,t){return[...[e,t].reduce((e,t)=>(t.forEach(t=>e.has(t.id)&&Object.assign(e.get(t.id),t)||e.set(t.id,t)),e),new Map).values()]}develop&&1==develop&&(console.log("Local Database Request Success"),console.log("Merging items..."));const s=l(e,t);$.getJSON(contentUrl,function(e,t,a){develop&&1==develop&&(console.log("Content Request Success. Got this data:"),console.log(e),console.log("Rendering Content...")),$("#page_loader").remove(),1==pageMenu&&$("header").after('<nav><div class="nav--wrapper"><ul class="nav--items"></ul></div></nav>');const n=document.getElementById("content");let o=0;$.each(e,function(e){const t=this,a=t.items;t.menu&&o++;var i=document.createElement("section");if(n.appendChild(i),e+=1,i.id="section_"+e,sectionElId="#section_"+e,t.title||t.text){var r=document.createElement("div");if(r.classList.add("section--header"),i.appendChild(r),t.title){var c=document.createElement("h2");c.innerHTML=t.title,$(".section--header h2").addClass("js-aos"),r.appendChild(c)}if(t.text){var d=document.createElement("p");d.innerHTML=t.text,$(".section--header p").addClass("js-aos"),r.appendChild(d)}}if(a){l(a,s);var p=document.createElement("div");i.appendChild(p),p.classList.add("section--content","content__items"),t.mountIn&&($("#"+t.mountIn).append(p),p.id="section_"+e,$(i).remove()),"featured"==t.type?p.classList.add("__featured"):"small"==t.type&&p.classList.add("__small"),$.each(a,function(t){const a=this;var n=document.createElement("div");n.classList.add("section--item"),p.appendChild(n),$(".section--item").html(`\n                  <div class="item--head">\n                    <a href="" target="_blank">\n                      <img src="" />\n                    </a>\n                  </div>\n                  <div class="item--info">\n                    <h3 class="item--name"></h3>\n                    <div class="item--desc"></div>\n                    <div class="item--footer">\n                      <div class="item--price"></div>\n                      <a href="" class="item--btn" target="_blank">\n                        ${CHECK_IT_OUT}\n                      </a>\n                    </div>\n                  </div>\n                `).addClass("js-aos");var l="item_"+e+"-"+(t+=1)+"-"+a.id;n.id=l;var s=".section--item#"+l;"custom"!=a.type?setTimeout(()=>{var e=$(s+" .item--head a"),t=$(s+" .item--footer a");if(!1===a.utmTags)e.attr("href",a.editUrl),t.attr("href",a.editUrl);else{var n=a.url+utmTags;if(void 0===a.editUrl)e.attr("href",n),t.attr("href",n);else{n=a.editUrl+utmTags;e.attr("href",n),t.attr("href",n)}}$(s+" .item--head img").attr("src",a.img).addClass("item--img");var l=a.name;if(l=(l=l.replaceAll("(",'<span class="name--label">')).replaceAll(")","</span>"),void 0===a.editName?$(s+" .item--name").html(`<span class="item--category">${a.category}</span>${l}`):a.editName&&(l=a.editName,$(s+" .item--name").html(`<span class="item--category">${a.category}</span>${l}`)),a.nameLabel){var o=a.nameLabel;o=(o=o.replaceAll("(",'<span class="name--label">')).replaceAll(")","</span>"),$(s+" .item--name").append(` ${o}`)}if($(s+" .item--desc").html(`<p>${a.desc}</p>`),a.text&&setTimeout(()=>{$(s+" .item--desc").append(`<p class="item--text">${a.text}</p>`)},0),a.labelName&&!a.labelIcon?$(s+" .item--head").prepend(`\n                        <div class="item--label">${a.labelName}</div>\n                      `):a.labelName&&a.labelIcon&&$(s+" .item--head").prepend(`\n                        <div class="item--label"><i class="fas fa-${a.labelIcon}"></i> ${a.labelName}</div>\n                      `),a.price)if(a.price.regular&&a.price.promo){a.discount=a.price.regular-a.price.promo,$(s+" .item--price").html(`\n                          ${a.price.promo}<small> ${CURRENCY}</small>\n                          <span class="__crossed">${a.price.regular} ${CURRENCY}</span>\n                        `),a.price.from&&($(s+" .item--price").prepend(`<small>${PRICE_FROM} </small>`),$(s+" .item--price .__crossed").prepend(`${PRICE_FROM} `));var i=a.price.regular-a.price.promo,r=Math.round((a.price.regular-a.price.promo)/a.price.regular*100);$(s+" .item--head").append('<div class="item--benefits"></div>');var c=$(s+" .item--benefits");a.price.percent&&!1!==a.price.percent?(c.append('<div class="item--discount"></div>'),$(s+" .item--discount").append(`\n                            <span class="benefit--title">${SAVE}</span>\n                            <strong>${r}<small>%</small></strong>\n                          `),a.price.discount&&$(s+" .item--discount strong").html(`<small>${UP_TO} </small>${a.price.discount}<small>%</small>`)):(c.append('<div class="item--discount"></div>'),$(s+" .item--discount").append(`\n                            <span class="benefit--title">${SAVE}</span>\n                            <strong>${i}<small> ${CURRENCY}</small></strong>\n                          `),a.price.discount&&$(s+" .item--discount strong").html(`<small>${UP_TO} </small>${a.price.discount}<small> ${CURRENCY}</small>`))}else a.price.promo||($(s+" .item--price").html(`${a.price.regular}<small> ${CURRENCY}</small>`),a.price.from&&$(s+" .item--price").prepend(`<small>${PRICE_FROM} </small>`));if(a.gift){c=$(s+" .item--benefits");var d=`<div class="item--gift">\n                                            <a href="${a.gift.url}" target="_blank" title="${a.gift.name} ${INCLUDED}">\n                                              <img src="${a.gift.img}" />\n                                            </a>\n                                            <span class="benefit--title">+ ${a.gift.name}</span>\n                                          </div>`;c.length>0?c.append(d):($(s+" .item--head").append('<div class="item--benefits"></div>'),$(s+" .item--benefits").append(d))}},0):"custom"==a.type&&($(s).addClass("item__custom"),setTimeout(()=>{$(".item__custom"+s).html(`${a.content}`)},0)),!0===a.soldOut&&setTimeout(()=>{$(s).addClass("item__sold_out"),$(s+" .item--footer a").html(SOLD_OUT)},0),!0===a.soon&&setTimeout(()=>{$(s).addClass("item__soon"),$(s+" .item--footer a").html(SOON)},0)})}if(1==pageMenu&&t.menu&&$("nav .nav--items").append(`<li class="nav--item"><a href="${sectionElId}" rel="nofollow">${t.menu}</a></li>`),"img"==t.type){var m=document.createElement("div");i.appendChild(m),m.classList.add("section--content","content__img");var u=sectionElId+" .content__img",g='<img src="'+t.img.desktop+'" class="img__desktop">',M='<img src="'+t.img.mobile+'"  class="img__mobile">';t.url?($(u).html(`<a href="${t.url}" target="_blank" title="${FIND_OUT}"></a>`),$(u+" a").html(g+M),void 0===t.img.mobile&&$(u+" a").html(M)):($(u).html(g+M),void 0===t.img.mobile&&$(u).html(M))}if("custom"==t.type){var v=document.createElement("div");i.appendChild(v),v.classList.add("section--content","content__custom"),$(sectionElId+" .content__custom").html(t.content)}if("embed"===t.type){var h=document.createElement("div");i.appendChild(h),h.classList.add("section--content","content__embed_iframe"),t.embed.youtube&&$(sectionElId+" .content__embed_iframe").html(`\n                  <iframe\n                    src="https://www.youtube.com/embed/${t.embed.youtube}"\n                    frameborder="1" autoplay="1" rel="0" controls="0"\n                    allow="accelerometer; encrypted-media; gyroscope; picture-in-picture"\n                    allowfullscreen="">\n                  </iframe>\n                `)}if("disclaimer"===t.type){$(sectionElId).prop("id","page_disclaimer");var f=document.createElement("div");i.appendChild(f),f.classList.add("section--content"),$("#page_disclaimer .section--content").html(`<p>${t.content}</p>`)}}),1==pageMenu&&$("nav .nav--items").addClass("col__"+o)}).fail(function(e,t,a){develop&&1==develop&&(console.log("Content Request Failed: "+t+", "+a),$("#page_loader").remove(),$("#content").append('<div class="app_error">&#10060; Error found while generating Content. Check console for more information.</div>'))}).always(function(e,t){develop&&1==develop&&console.log("Content Rendering Complete")})}).fail(function(e,t,a){develop&&1==develop&&console.log("Local Database Request Failed: "+t+", "+a)}).always(function(e,t){develop&&1==develop&&console.log("Local Database Request Complete")})}).fail(function(e,t,a){develop&&1==develop&&console.log("Global Database Request Failed: "+t+", "+a)}).always(function(e,t){develop&&1==develop&&console.log("Global Database Request Complete")})})}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault();var t=$(this).attr("href");"#"!==t&&$("html, body").animate({scrollTop:$(t).offset().top},1e3)}),settings.menu&&$(document).scroll(function(){$(this).scrollTop()>=$("nav").offset().top?$("nav").addClass("__sticky"):$("nav").removeClass("__sticky")}),console.log("%c\nMMMMMMMMMMMMMMMMMm     IIII\nMMMMMMMMMMMMMMMMMMMm   IIII\nMMMM           mMMMM   IIII\nMMMM    MMMM    MMMM   IIII\nMMMM    MMMM    MMMM   IIII\nMMMM    MMMM    MMMM   IIII\nMMMM    MMMM    MMMM   IIII\nMMMM    MMMM    MMMM   IIII\nMMMM    MMMM    MMMM   IIII\n","color: #ff6900");
